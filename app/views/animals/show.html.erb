<div data-controller="mapbox">
<div id="mapbox"></div>

<div id="geocoder" class="geocoder"></div>

<div class="formcreatedwrap">
<p id="notice"><%= notice %></p>

<p>
  <strong>Species:</strong>
  <%= @animal.species %>
</p>

<p>
  <strong>Breed:</strong>
  <%= @animal.breed %>
</p>

<p>
  <strong>Size:</strong>
  <%= @animal.size %>
</p>

<p>
  <strong>Color:</strong>
  <%= @animal.color %>
</p>

<p>
<% if @animal.image.attached? %>
  <strong>Picture:</strong>
  <%= image_tag(@animal.image, style:"height:200px; width:150px") %>
  <% end %>
</p>

<p>
<strong>Longitude:</strong>
  <%= @animal.longitude %>
</p>

<p>
  <strong>Latitude:</strong>
  <%= @animal.latitude %>
</p>

<p>
  <strong>Location:</strong>
  <%= @animal.location %>
</p>

<p>
  <strong>Lost:</strong>
  <%= @animal.lost %>
</p>

<p>
  <strong>Found:</strong>
  <%= @animal.found %>
</p>
</div>

<div class="mapwrap">
 <!-- Seach Bar for map -->
    <!-- Insert Map -->
    <div class ="map" is="map">
        <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.js" ></script>
        <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css" rel="stylesheet"/>
        <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"  ></script>
        <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css" type="text/css"  />
        <style>
        #map{
           position: center;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 25px;
            border: 3px solid green;
            box-sizing: border-box;
            display:inline-block;
        }
                .map {
    text-align: center;
    border: 2px solid greenyellow;
    margin: 0 auto;
    height: 600px;
    width: 600px;
    position:relative;
}
        </style>

        <body>
            <div id="map"></div>

            <script>

              mapboxgl.accessToken = 'pk.eyJ1Ijoiam9zdWV0b3JyZXNmMiIsImEiOiJjbDh3bDhvcXcwYWU2M29vYTIzeXV5c3hlIn0.KBJxuzXQCIIAU8Cg3RaRBA';
              const map = new mapboxgl.Map({
                  container: 'map',
                  style: 'mapbox://styles/josuetorresf2/cl9atg6p0000914pdap8esalw',
                  center: [<%= @animal.longitude %> , <%= @animal.latitude %>], 
                  zoom: 10
              });
                 console.log([`${<%= @animal.longitude %>}`]);
                console.log([`${<%= @animal.latitude %>}`]);

                marker = new mapboxgl.Marker({
                    color:"pink"
                })
                  .setLngLat([<%= @animal.longitude %> , <%= @animal.latitude %>])
                  //.setLngLat([-104.80061464318779,38.892833823146056])
                  .addTo(map);
                    

                

        </script>
    </div>
</div>

<%= link_to 'Edit', edit_animal_path(@animal) %> |



<button class="animalstyle"><%= link_to 'Back', animals_path %></button>
